{{ define "main" }}
<article class="mx-4 sm:mx-12">
  <div class="text-sm">{{- partial "breadcrumb.html" . -}}</div>
  <section class="">
    <h1 class="text-4xl mt-4">{{ .Title }}</h1>
    <div class="text-sm mt-2">
      <span class="mr-1">更新日:{{ .Lastmod.Format "2006.01.02" }}</span>
      <span class="">作成日:{{ .Date.Format "2006.01.02" }}</span>
    </div>
    <div class="text-sm mt-1">
      {{ range (.GetTerms "tags") }}
      <a class="inline-block no-underline mt-1 p-1 text-sm text-white bg-gray-600 hover:bg-gray-500 rounded"
        href="{{ .Permalink }}">#{{ .LinkTitle }}</a>
      {{ end }}
    </div>
    <div class="post leading-loose mt-2">
      {{ .Content }}
    </div>
  </section>

  {{ $related := .Site.RegularPages.Related . | first 8 }}
  {{ $BaseURL := .Site.BaseURL }}
  {{ with $related }}

  <section class="mt-8">
    <h4 class="font-medium">Related contents</h4>
    {{ range . }}
    <article class="m-4 pt-3 border-t border-grey-light">
      <a href="{{ .Permalink }}" data-rel="prefetch" class="">
      <div class="flex flex-row">
        <div class="basis-1/5 rounded flex justify-center items-center">
          <img loading="lazy" class="h-32 object-contain" alt="Eyecatch" media="" layout="fill" src="{{ if isset .Params " eyecatch"}}{{ .Params.Eyecatch }}{{ else if isset .Params "img" }}{{ .Params.img }}{{ else }}{{$.Site.BaseURL}}images/nopicture.png{{ end }}" />
        </div>
        <div class="basis-4/5 p-4 flex flex-col justify-between leading-normal">
          <div class="px-1">
            <p class="text-sm text-grey-dark flex items-center">{{ range .Params.category }}{{. | upper }}{{ end }}</p>
            <p class="text-grey-dark">{{ .Date.Format "2006.01.02" }}</p>
            <div class="text-black text-xl mb-2">{{ .Title }}</div>
          </div>
        </div>
      </div>
    </a>
    </article>
    {{ end }}
  </section>
  {{ end }}
</article>
{{ end }}